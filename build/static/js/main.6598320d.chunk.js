(this["webpackJsonpvfs-payment"]=this["webpackJsonpvfs-payment"]||[]).push([[0],{11:function(t,e,n){t.exports={DisplayCenter:"ImagePage_DisplayCenter__Gszry",ImagePageDiv:"ImagePage_ImagePageDiv__1NUU6",ImagePageImg:"ImagePage_ImagePageImg__3DxQR",NextButton:"ImagePage_NextButton__2ETfC"}},22:function(t,e,n){},3:function(t,e,n){t.exports={SightingDiv:"SightingBox_SightingDiv__nl7as",VoteButtonResultDiv:"SightingBox_VoteButtonResultDiv__3cb_r",VoteButtonLabel:"SightingBox_VoteButtonLabel___Chfm",VoteButton:"SightingBox_VoteButton__apsKW",VoteButtonDiv:"SightingBox_VoteButtonDiv__161CT"}},31:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(2),s=n.n(a),o=n(15),c=n.n(o),r=(n(22),n(4)),h=n(5),u=n(7),g=n(6),l=(n(23),n(13)),d=n.n(l),m=n(16),j=n(3),b=n.n(j),p=n(9),v=n(10),f=function(t){Object(u.a)(n,t);var e=Object(g.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={sightingId:t.sightingId,name:t.name,X:t.X,Y:t.Y,Width:t.Width,Height:t.Height,Voted:0,Hide:0,ip:t.ip,city:t.city,country:t.country},i}return Object(h.a)(n,[{key:"postVote",value:function(t){var e=this,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vote:t,sightingId:this.state.sightingId,IPAddress:this.state.ip,city:this.state.city,country:this.state.country})};fetch("https://manage.lms360.net/abcapi/api/vote",n).then((function(t){var n=e;console.log(t.json()),e.setState({Voted:1}),setTimeout((function(){n.setState({Hide:1})}),2e3)}))}},{key:"render",value:function(){var t=this;return Object(i.jsx)("div",{children:0==this.state.Hide&&Object(i.jsxs)("div",{className:b.a.SightingDiv,style:{left:this.state.X,top:this.state.Y,height:this.state.Height,width:this.state.Width},children:[0==this.state.Voted&&Object(i.jsxs)("div",{className:b.a.VoteButtonDiv,children:[Object(i.jsx)("p",{className:b.a.VoteButtonLabel,children:this.state.name}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("button",{className:b.a.VoteButton,onClick:function(){return t.postVote(2)},style:{backgroundColor:"#4CAF50"},children:["    ",Object(i.jsx)(p.a,{icon:v.a})]}),Object(i.jsxs)("button",{className:b.a.VoteButton,onClick:function(){return t.postVote(0)},style:{backgroundColor:"#008CBA"},children:["    ",Object(i.jsx)(p.a,{icon:v.b})]}),Object(i.jsxs)("button",{className:b.a.VoteButton,onClick:function(){return t.postVote(1)},style:{backgroundColor:"#f44336"},children:["    ",Object(i.jsx)(p.a,{icon:v.c})]})]})]}),1==this.state.Voted&&Object(i.jsx)("div",{className:b.a.VoteButtonResultDiv,children:Object(i.jsx)("label",{className:b.a.VoteButtonLabel,children:"Thank you"})})]})})}}]),n}(a.Component),y=n(11),x=n.n(y),O=function(t){Object(u.a)(n,t);var e=Object(g.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).handleKeypress=function(t){13===t.keyCode&&i.getData()},i.state={imagePath:"",sightings:[],imageLoading:!0,ip:"",city:"",country:""},i}return Object(h.a)(n,[{key:"loadNextImage",value:function(){console.log("Next"),this.getData()}},{key:"componentDidMount",value:function(){var t=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getIp(),this.getData();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getIp",value:function(){var t=this;fetch("https://ipapi.co/json/",{method:"GET"}).then((function(t){return t.json()})).then((function(e){console.log(e),t.setState({ip:e.ip,city:e.city,country:e.country_name})}),(function(t){}))}},{key:"getData",value:function(){var t=this;this.setState({imagePath:"imagesLoading.svg"});var e=new XMLHttpRequest;e.addEventListener("load",(function(){var n=JSON.parse(e.responseText);t.setState({imagePath:"https://lmsblob.blob.core.windows.net/"+n.imagePath}),t.setState({sightings:n.sightings})})),e.open("GET","https://manage.lms360.net/abcapi/api/image"),e.send()}},{key:"handleImageLoaded",value:function(){this.setState({imageLoading:!1})}},{key:"render",value:function(){var t=this;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:x.a.ImagePageDiv,children:[0==this.state.imageLoading&&this.state.sightings.map((function(e,n){return Object(i.jsx)(f,{name:e.name,sightingId:e.sightingId,X:e.x,Y:e.y,Width:e.width,Height:e.height,ip:t.state.ip,city:t.state.city,country:t.state.country},e.sightingId)})),Object(i.jsx)("img",{className:x.a.ImagePageImg,src:this.state.imagePath,onLoad:this.handleImageLoaded.bind(this)}),Object(i.jsx)("button",{className:x.a.NextButton,onClick:function(){return t.getData()},onKeyPress:this.handleKeyPress,children:"Next"})]})})}}]),n}(a.Component),_=(n(31),function(t){Object(u.a)(n,t);var e=Object(g.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={},i}return Object(h.a)(n,[{key:"render",value:function(){return Object(i.jsx)("div",{className:"app",children:Object(i.jsx)(O,{})})}}]),n}(a.Component)),I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),i(t),a(t),s(t),o(t)}))};n(32);c.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(_,{})}),document.getElementById("root")),I()}},[[34,1,2]]]);
//# sourceMappingURL=main.6598320d.chunk.js.map